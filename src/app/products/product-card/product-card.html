<mat-card class="product-card" appearance="outlined">
  <div class="card-header">
    @if (product().isOnSale) {
      <mat-chip>Sale</mat-chip>
    }
  </div>

  <div class="product-image-container">
    <img
      [ngSrc]="product().image"
      [alt]="product().name"
      width="300"
      height="200"
      fetchpriority="low"
      decoding="async"
      class="product-image" />
  </div>

  <mat-card-content class="product-content">
    <div class="product-category">
      <mat-chip>{{ product().category }}</mat-chip>
    </div>

    <h3 class="product-title">{{ product().name }}</h3>

    <p class="product-description">{{ product().description }}</p>

    <div class="rating-container">
      <div class="stars">
        @for (star of getStars(product().rating); track $index) {
          <mat-icon class="star-icon">{{ star }}</mat-icon>
        }
      </div>
      <span class="rating-text">{{ product().rating }} ({{ product().reviewCount }} reviews)</span>
    </div>

    <div class="price-container">
      @if (product().originalPrice && product().isOnSale) {
        <span class="original-price">{{ product().originalPrice | currency }}</span>
      }
      <span class="current-price">{{ product().price | currency }}</span>
    </div>
  </mat-card-content>

  <mat-card-actions class="card-actions">
    <button mat-icon-button aria-label="Add to wishlist" (click)="onAddToWishlist()">
      <mat-icon>favorite_border</mat-icon>
    </button>
    <button matButton="filled" (click)="onAddToCart()">
      <mat-icon>shopping_cart</mat-icon>
      Add to Cart
    </button>
    <button matButton>
      <mat-icon>visibility</mat-icon>
      View Details
    </button>
  </mat-card-actions>
</mat-card>
